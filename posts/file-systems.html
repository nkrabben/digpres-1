<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>exFAT: A File System for Your Portable Drives - NYPL Digital Preservation</title> <link rel="shortcut icon" href="/digpres/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/digpres/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=2596733842"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '2596733842', { 'anonymize_ip': true }); </script> <script src="/digpres/assets/js/vendor/lunr.min.js"></script> <script src="/digpres/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>exFAT: A File System for Your Portable Drives | NYPL Digital Preservation</title> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="exFAT: A File System for Your Portable Drives" /> <meta name="author" content="Nick Krabbenhoeft" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="exFAT: A File System for Your Portable Drives" /> <meta property="og:description" content="exFAT: A File System for Your Portable Drives" /> <link rel="canonical" href="https://nypl.github.io/digpres/posts/file-systems" /> <meta property="og:url" content="https://nypl.github.io/digpres/posts/file-systems" /> <meta property="og:site_name" content="NYPL Digital Preservation" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2022-02-14T14:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="exFAT: A File System for Your Portable Drives" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Nick Krabbenhoeft"},"dateModified":"2022-02-14T14:00:00+00:00","datePublished":"2022-02-14T14:00:00+00:00","description":"exFAT: A File System for Your Portable Drives","headline":"exFAT: A File System for Your Portable Drives","mainEntityOfPage":{"@type":"WebPage","@id":"https://nypl.github.io/digpres/posts/file-systems"},"url":"https://nypl.github.io/digpres/posts/file-systems"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/digpres/" class="site-title lh-tight"> NYPL Digital Preservation </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/digpres/about/" class="nav-list-link">About the Program</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Ingest category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/digpres/docs/ingest/overview" class="nav-list-link">Ingest</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Posts category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/digpres/posts/" class="nav-list-link">Posts</a><ul class="nav-list "><li class="nav-list-item "><a href="/digpres/posts/topics" class="nav-list-link">Topics</a></li></ul></li><li class="nav-list-item"><a href="/digpres/contact/" class="nav-list-link">Contact</a></li><li class="nav-list-item"><a href="/digpres/" class="nav-list-link">Home</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search NYPL Digital Preservation" aria-label="Search NYPL Digital Preservation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="exfat-a-file-system-for-your-portable-drives"> <a href="#exfat-a-file-system-for-your-portable-drives" class="anchor-heading" aria-labelledby="exfat-a-file-system-for-your-portable-drives"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> exFAT: A File System for Your Portable Drives </h1> <p>We use a lot of portable drives at the library. They range in size from 500 GB solid state disks the size of a credit card to a 126 TB RAID 5 array with its own rollaway case. All of them use the same file system, exFAT. And if you are also using a lot of portable drives, you should consider exFAT as well.</p> <h2 id="what-is-a-file-system"> <a href="#what-is-a-file-system" class="anchor-heading" aria-labelledby="what-is-a-file-system"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What is a file system? </h2> <p>A file system is the way that data is structured on a storage device. To better understand it, think about some of the things that happens when you open a file on your desktop named <code class="language-plaintext highlighter-rouge">video.mov</code></p> <ol> <li>The computer figures out where the Desktop folder is in the folder hierarchy.</li> <li>It checks if there is a file in that folder named <code class="language-plaintext highlighter-rouge">video.mov</code>.</li> <li>It checks to see if you have permission to open that file.</li> <li>It finds out the sector of the device where the first part of that file is written.</li> </ol> <p>The rules that create the architecture are part of the file system. The <a href="https://en.wikipedia.org/wiki/File_Allocation_Table">File Allocation Table (FAT)</a> file system, first published by Microsoft in 1977, is a good example to use for illustration.</p> <ol> <li>Each folder is defined as its own table with a row for every file or folder that is a member of that folder.</li> <li>The first 11 bytes of the row define the file or folder name, represented as <code class="language-plaintext highlighter-rouge">(8 characters).(3 characters)</code>.</li> <li>The 13th byte of the row specifies whether the file requires a password to read, modify, or delete.</li> <li>The 20th and 21st byte specify which sector of the device the first chunk of the file is stored in.</li> </ol> <p>As long as your computer system knows those rules and can follow them, it can use a storage device formatted with that file system. If it canâ€™t read those rules, your computer will be able to see the storage device but not the contents of it.</p> <h2 id="what-are-other-examples-of-file-systems"> <a href="#what-are-other-examples-of-file-systems" class="anchor-heading" aria-labelledby="what-are-other-examples-of-file-systems"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What are other examples of file systems? </h2> <p>A file system developed in 1977 will have the biases of a computing in 1977. For example, a 5.25-inch floppy disk only held about 360 thousand bytes, so the designers didnâ€™t want to consume too much space with the file system. With that perspective 11 characters for the file name and 2 bytes for the sector position was fine. On a device with 5 billion bytes of capacity, 11 characters for a file name is miserly, and 2 bytes isnâ€™t enough for the sector positions. FAT12 was extended to deal with some of these issues, first to FAT16 (1984) and then to FAT32 (1996).</p> <p>But file systems can do even more than just organize a storage device. They can have features like journaling, data integrity checks, on-the-fly compression, and storing metadata about the files. The implementation of these features could be commercially advantageous and vendors created their own file systems to best interact with their systems.</p> <p>Apple has used <a href="https://en.wikipedia.org/wiki/Hierarchical_File_System">HFS</a> (1986), <a href="https://en.wikipedia.org/wiki/HFS_Plus">HFS+</a> (1998), and <a href="https://en.wikipedia.org/wiki/Apple_File_System">APFS</a> (2017). Microsoft created <a href="https://en.wikipedia.org/wiki/NTFS">NTFS</a> (1993). In Linux, there is <a href="https://en.wikipedia.org/wiki/Ext2">ext2</a> (1993), <a href="https://en.wikipedia.org/wiki/Ext3">ext3</a> (2001), <a href="https://en.wikipedia.org/wiki/Ext4">ext4</a> (2008), and <a href="https://en.wikipedia.org/wiki/Btrfs">btrfs</a> (still in development). <a href="https://en.wikipedia.org/wiki/Comparison_of_file_systems">There are many more</a> if youâ€™re curious. (Thanks to Ross Spencer for this link)</p> <p>Take note of the relationship between operating systems and file systems. Every OS will best support in-house developed file systems. Supporting othersâ€™ file systems is not guaranteed. Windows canâ€™t read HFS+. macOS can read from an NTFS-formatted device, but it canâ€™t write to it. Linux can work with nearly everything, if someone released software to do it and you installed it.</p> <h2 id="why-does-this-matter"> <a href="#why-does-this-matter" class="anchor-heading" aria-labelledby="why-does-this-matter"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Why does this matter? </h2> <p>For those of us that work with old storage media, identifying a file system and having a computer with the appropriate software to read it is important. Thatâ€™s just another example of needing to maintain an array of options to access data from the harried years of the 80s and 90s.</p> <p>For those of us writing data to storage devices, we need to choose file systems that meet the needs of our computing environment. A common need is cross-platform compatibility. Because, if my digitization vendor uses Windows workstations and I use Macs, the hard drive we shuttle data with must be compatible with both.</p> <p>You can install software to add additional file system compatibility. And I do this when I have open-source options available or budget to buy licenses. But, itâ€™s easier if I donâ€™t have to worry about what software is on what workstation. Isnâ€™t there a cross-platform file system?</p> <h2 id="exfat-the-cross-platform-choice"> <a href="#exfat-the-cross-platform-choice" class="anchor-heading" aria-labelledby="exfat-the-cross-platform-choice"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> exFAT: The Cross-Platform Choice </h2> <p>Microsoft released another file system in 2006, the <a href="https://en.wikipedia.org/wiki/ExFAT">extensible File Allocation Table (exFAT)</a>. exFAT addresses FAT32â€™s critical flaw in modern computing environments. The FAT table records the size of a file using 4 bytes. That means a storage device using FAT can only store files that are 4,294,967,295 bytes (4.29 GB) large. In digitization work, this is smaller than most video files and even some audio files.</p> <p>exFAT uses 8 bytes to store the size of a file, which means the maximum file size is 1.84 quintillion bytes (1.84 exabytes). At this point, thatâ€™s plenty of space for our entire collection, much less a single file.</p> <p>exFAT is natively supported in Windows, macOS, and Linux. That means no software installation needed.</p> <p>It also supports all unicode characters, meaning <code class="language-plaintext highlighter-rouge">è§†é¢‘.mov</code>, <code class="language-plaintext highlighter-rouge">ÙˆÛŒÚˆÛŒÙˆ.mov</code>, <code class="language-plaintext highlighter-rouge">this-file-name-is-really-very-long-,-probably-too-long-to-be-useful_.mov</code>and <code class="language-plaintext highlighter-rouge">ðŸ“¹ .mov</code> are all legal.</p> <h3 id="whats-the-catch"> <a href="#whats-the-catch" class="anchor-heading" aria-labelledby="whats-the-catch"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Whatâ€™s the catch? </h3> <p>Well, exFAT doesnâ€™t have support for useful features like journaling, data integrity checks, and on-the-fly compression. Of these, the lack of journaling is the most important. File systems with <a href="https://en.wikipedia.org/wiki/Journaling_file_system">journaling</a> keep track of changes in progress. If youâ€™re in the middle of an action like moving a folder when you unplug it or it loses power, the file system could be corrupted. Your computer warns you about unplugging a drive without ejecting it because of that risk. A journaling file system can fix the file system next time it is connected. exFAT can leave you high and dry. (Thanks to Kieran Oâ€™Leary for prompting me to learn what journaling is.)</p> <p>The cross-platform support also isnâ€™t perfect. macOS only supports exFAT drives formatted with a sector size of 128-1024 kiB. Either format the drive on a Mac or be careful when choosing options during formatting on Windows and Linux.</p> <p>Linux support only started in 2019 with kernel in 5.4, with better support starting in <a href="https://arstechnica.com/information-technology/2020/03/the-exfat-filesystem-is-coming-to-linux-paragon-softwares-not-happy-about-it/">5.7</a> (Iâ€™m still amazed that I can plug a 100+ TB RAID into an Android phone). However, if youâ€™re using a Linux distro with a pre-5.4 kernel, you need to install exFAT drivers yourself. Most notably in our community, that includes BitCurator 2.x, which is based on Ubuntu 18.04 LTS with the 5.3 kernel. (Thanks to Kieran for this as well.)</p> <p>To me, those are acceptable compromises when it comes to portable hard drives used to transfer files.</p> <h2 id="exfat-is-an-industry-standard"> <a href="#exfat-is-an-industry-standard" class="anchor-heading" aria-labelledby="exfat-is-an-industry-standard"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> exFAT is an Industry Standard </h2> <p>If youâ€™re looking for more validation, take a look at SD cards. They are the last major removable media format that needs to be accessible on a variety of computers. The default file system for all cards larger than 32 GB is exFAT.</p> <p>exFAT has proved to be the most reliable solution in our work. Itâ€™s worth evaluating in your context if youâ€™re frustrated with platform cross-compatibility.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
